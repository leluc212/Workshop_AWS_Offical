<nav id="sidebar" class="{{ if $.Site.Params.showVisitedLinks }}showVisitedLinks{{ end }}">
  {{ $currentNode := . }}
  {{ $showvisitedlinks := .Site.Params.showVisitedLinks }}

  <div id="header-wrapper">
    <div id="header">{{ partial "logo.html" . }}</div>
    {{ if not .Site.Params.disableSearch }}
      {{ partial "search.html" . }}
    {{ end }}
  </div>

  <div class="highlightable">
    <ul class="topics">
      {{ if eq .Site.Params.ordersectionsby "title" }}
        {{ range .Site.Home.Sections.ByTitle }}
          {{ partial "section-tree-nav.html" (dict "sect" . "currentnode" $currentNode "showvisitedlinks" $showvisitedlinks) }}
        {{ end }}
      {{ else }}
        {{ range sort .Site.Home.Sections "Weight" }}
          {{ partial "section-tree-nav.html" (dict "sect" . "currentnode" $currentNode "showvisitedlinks" $showvisitedlinks) }}
        {{ end }}
      {{ end }}
    </ul>

    {{ $disableShortcutsTitle := .Site.Params.DisableShortcutsTitle }}
    {{ with .Site.Menus.shortcuts }}
      <section id="shortcuts">
        <h3>{{ if not $disableShortcutsTitle }}{{ T "Shortcuts-Title" }}{{ end }}</h3>
        <ul>
          {{ range sort . "Weight" }}
            <li>
              {{ .Pre }}<a class="padding" href="{{ .URL | absLangURL }}">{{ safeHTML .Name }}</a>{{ .Post }}
            </li>
          {{ end }}
        </ul>
      </section>
    {{ end }}

    {{ if or (gt (len .Site.Languages) 1) $showvisitedlinks }}
      <section id="prefooter">
        <hr />
        <ul>
          {{ if and (gt (len .Site.Languages) 1) (not .Site.Params.DisableLanguageSwitchingButton) }}
            <li>
              <a class="padding">
                <i class="fas fa-language fa-fw"></i>
                <div class="select-style">
                  <select id="select-language" onchange="location = this.value;">
                    {{ $siteLanguages := .Site.Languages }}
                    {{ $pageLang := .Page.Lang }}

                    {{ range .Page.AllTranslations }}
                      {{ $translation := . }}
                      {{ range $siteLanguages }}
                        {{ if eq $translation.Lang .Lang }}
                          {{ if eq $pageLang .Lang }}
                            <option value="{{ $translation.Permalink }}" selected>{{ .LanguageName }}</option>
                          {{ else }}
                            <option value="{{ $translation.Permalink }}">{{ .LanguageName }}</option>
                          {{ end }}
                        {{ end }}
                      {{ end }}
                    {{ end }}

                  </select>
                  <!-- svg icon -->
                  <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="255px" height="255px" viewBox="0 0 255 255" xml:space="preserve">
                    <g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g>
                  </svg>
                </div>
              </a>
            </li>
          {{ end }}

          {{ if $showvisitedlinks }}
            <li>
              <a class="padding" href="#" data-clear-history-toggle="">
                <i class="fas fa-history fa-fw"></i> {{ T "Clear-History" }}
              </a>
            </li>
          {{ end }}
        </ul>
      </section>
    {{ end }}

    <section id="footer">{{ partial "menu-footer.html" . }}</section>
  </div>
</nav>
