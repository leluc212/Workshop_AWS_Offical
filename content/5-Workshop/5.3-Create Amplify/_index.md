---
title : "Create Amplify backend"
date: 2025-09-10
weight : 3 
chapter : false
pre : " <b> 5.3. </b> "
---




## Goal

In this step we describe how the **Amplify backend** for the *English Journey* web application was created.

Instead of provisioning Amazon Cognito, AWS Lambda, Amazon S3, AWS WAF and Amazon DynamoDB separately in the console, we use **AWS Amplify (Gen 2)** as a central orchestration layer. Amplify reads the configuration from our project and generates the necessary AWS resources for authentication, APIs, data storage and hosting.

---

## 5.3.1 Why Amplify?

English Journey is a single-page application built with React. We chose Amplify because:

- it provides **one entry point** to configure the backend for a web or mobile app,
- it can automatically create **Cognito**, **Lambda**, **DynamoDB**, **S3** and **CloudFront** resources from a simple configuration,
- it integrates easily with the **Amplify JavaScript libraries** used by the frontend (sign-in, API calls, file storage).

Amplify becomes the “backend platform” that hides much of the low-level boilerplate of setting up these services one by one.

---

## 5.3.2 Amplify app creation and hosting

1. We created a new **Amplify App** from the AWS Management Console and connected it to our Git repository that contains the React source code of English Journey.
2. During the wizard we configured:
   - the default **build settings** (install dependencies and run `npm run build`),
   - the **environment variables** required by the app.
3. Amplify automatically created:
   - an **S3 bucket** to store the built static files,
   - a **CloudFront distribution** in front of that bucket to serve the web site with low latency.
4. The output of this step is a public URL where the React frontend of English Journey is hosted. All later backend resources (Cognito, Lambda, DynamoDB…) are associated with this Amplify app.

---

## 5.3.3 Authentication with Cognito (Amplify Auth)

To implement sign-up, sign-in and password reset for students, we enabled the **Auth** category in Amplify.

Conceptually, the steps were:

1. Define the authentication requirement in Amplify:
   - sign-in with **email and password**,
   - self-registration enabled so that new students can create accounts,
   - basic password policy and email verification.
2. Amplify generated an **Amazon Cognito User Pool** with the corresponding settings.
3. The React frontend uses the **Amplify Auth library** to:
   - create new users (sign up),
   - authenticate existing users (sign in),
   - read user attributes (name, email) and display greetings such as “Chào mừng trở lại, Duy Khang!”.

All tokens issued by Cognito (ID token and access token) are later used to protect our API and Lambda functions.

---

## 5.3.4 Backend logic with Lambda (Amplify Functions)

The main business logic of English Journey runs in **AWS Lambda**.  
Using Amplify’s Function category we created several Lambda functions, for example:

- **MyLearning / DailyCheckIn** – updates study streaks and progress for the user.
- **LevelTest** – receives the answers from the placement test, calculates the CEFR level (A1–C2) and stores the result.
- **Dictionary / Vocabulary** – provides APIs for searching words, saving “bookmarked” vocabulary and tracking which words a user has mastered.

From the Amplify project these functions are defined as backend handlers.  
When deploying the Amplify app, each function is created as a separate **Lambda** with the correct IAM permissions and environment variables (for example, DynamoDB table names).

---

## 5.3.5 Data layer with DynamoDB

To store application data we defined several data models in the backend, which Amplify maps to **Amazon DynamoDB tables**:

- **Users / Profiles** – basic user information and learning preferences.
- **PlacementTestResults** – scores and detected level for each attempt.
- **Vocabulary / Dictionary** – list of words, meanings, examples and CEFR levels.
- **UserProgress** – saved vocabulary, words marked as “mastered”, quiz history, daily streaks.

Each Lambda function receives the table name via environment variables generated by Amplify, and accesses DynamoDB through the AWS SDK.  
Using Amplify in this way keeps all table definitions in code and makes the deployment reproducible.

---


## 5.3.7 Protection with AWS WAF

The public endpoint of the web application is the CloudFront distribution created by Amplify.  
To protect this endpoint we associated an **AWS WAF Web ACL** with the distribution and enabled:

- the AWS managed rule groups that block common web attacks (SQL injection, XSS, bot traffic),
- a basic rate-limit rule to prevent simple denial-of-service attempts.

In the architecture diagram this is represented by the **AWS WAF** component in front of the Amplify application.

---

## Summary

In summary, **Amplify** is the central service that creates and connects:

- **Cognito** for authentication,
- **Lambda** for backend logic,
- **DynamoDB** for application data,
- and integrates with **AWS WAF** for additional protection.

The rest of the workshop (SNS, CloudWatch, IAM policies, …) builds on top of this Amplify-managed backend.
